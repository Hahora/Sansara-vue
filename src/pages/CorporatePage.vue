<template>
  <div class="p-4">
    <div class="flex items-center mb-4">
      <router-link to="/" class="btn-back mr-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>
        –ù–∞–∑–∞–¥
      </router-link>
      <h1 class="page-title text-xl">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</h1>
    </div>
    
    <div class="space-y-4">
      <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
      <div class="card">
        <h2 class="section-title">üè¢ <b>–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</b></h2>
        <p class="text-black text-sm italic mb-3">¬´–û—Ç–¥—ã—Ö, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –Ω—É–∂–µ–Ω –æ—Ç–¥—ã—Ö¬ª</p>

        <div class="bg-gray-50 rounded-lg p-3 mb-3">
          <p class="text-black font-medium"><b>–ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π:</b></p>
        </div>

        <div class="space-y-2">
          <div class="flex items-start">
            <span class="text-indigo-500 mr-2 font-bold">üéØ</span>
            <span class="text-black"><strong>–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –±–∞–Ω–Ω—ã–µ —Ä–µ—Ç—Ä–∏—Ç—ã</strong> ‚Äî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ—Ç–¥—ã—Ö –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π</span>
          </div>
          <div class="flex items-start">
            <span class="text-indigo-500 mr-2 font-bold">üë•</span>
            <span class="text-black"><strong>–ö–æ–º–∞–Ω–¥–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</strong> ‚Äî –¢–∏–º–±–∏–ª–¥–∏–Ω–≥ –≤ –±–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</span>
          </div>
          <div class="flex items-start">
            <span class="text-indigo-500 mr-2 font-bold">üéÅ</span>
            <span class="text-black"><strong>–ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</strong> ‚Äî –° –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ–ø–ª–∞—Ç—ã —Å —Ä/—Å</span>
          </div>
          <div class="flex items-start">
            <span class="text-indigo-500 mr-2 font-bold">üéÑ</span>
            <span class="text-black"><strong>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã</strong> ‚Äî –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–æ–≤</span>
          </div>
        </div>
      </div>

      <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
      <div class="card">
        <h2 class="section-title">‚úÖ <b>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–º–∏</b></h2>

        <div class="space-y-2">
          <div class="flex items-start">
            <span class="text-green-700 text-2xl mr-2">‚úì</span>
            <span class="text-black">–û–ø–ª–∞—Ç–∞ —Å —Ä–∞—Å—á—ë—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞</span>
          </div>
          <div class="flex items-start">
            <span class="text-green-700 text-2xl mr-2">‚úì</span>
            <span class="text-black">–ó–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</span>
          </div>
          <div class="flex items-start">
            <span class="text-green-700 text-2xl mr-2">‚úì</span>
            <span class="text-black">–ü–æ–ª–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–¥ –∫–ª—é—á</span>
          </div>
          <div class="flex items-start">
            <span class="text-green-700 text-2xl mr-2">‚úì</span>
            <span class="text-black">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–µ–∑–¥–∞ –±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–æ–π</span>
          </div>
          <div class="flex items-start">
            <span class="text-green-700 text-2xl mr-2">‚úì</span>
            <span class="text-black">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π</span>
          </div>
        </div>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
      <div class="space-y-3">
        <!-- –ò—â–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º -->
        <div v-if="corporateProgram">
          <router-link
            :to="{
              name: 'BookingWithParams',
              params: {
                programId: corporateProgram.id,
                programType: corporateProgram.program_type,
                eventId: corporateProgram.slug
              }
            }"
            class="btn-primary block text-center"
          >
            üìù –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É
          </router-link>
        </div>
        <div v-else>
          <router-link
            :to="{ name: 'BookingWithParams', params: { programType: 'corporate' }}"
            class="btn-primary block text-center opacity-70 cursor-not-allowed"
            disabled
          >
            üìù –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É
          </router-link>
          <p class="text-red-500 text-xs mt-1 text-center">
            –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
          </p>
        </div>

        <button class="btn-secondary">
          üë®‚Äçüíº –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
        </button>
      </div>
    </div>
  </div>
</template>

<script>
import { mapState, mapActions } from 'pinia';
import { useAppStore } from '@/stores/appStore';

export default {
  name: 'CorporatePage',
  computed: {
    ...mapState(useAppStore, ['isLoading', 'error', 'programs', 'programsLoaded']),

    // –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
    corporateProgram() {
      if (!this.programs || this.programs.length === 0) return null;

      // –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É —Å —Ç–∏–ø–æ–º 'corporate'
      let program = this.programs.find(p =>
        p.program_type === 'corporate'
      );

      // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, –∏—â–µ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
      if (!program) {
        program = this.programs.find(p =>
          p.name.toLowerCase().includes('–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤') ||
          p.name.toLowerCase().includes('team building') ||
          p.name.toLowerCase().includes('business') ||
          p.name.toLowerCase().includes('company')
        );
      }

      return program || null;
    }
  },
  async mounted() {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
    if (!this.programsLoaded && this.loadPrograms) {
      await this.loadPrograms();
    }
  },
  methods: {
    ...mapActions(useAppStore, ['loadPrograms'])
  }
}
</script>